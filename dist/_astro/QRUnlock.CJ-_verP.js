import{r as _,a as o}from"./index._OACqPSs.js";var v={exports:{}},m={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N;function C(){if(N)return m;N=1;var f=_(),c=Symbol.for("react.element"),h=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,x=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function g(a,s,n){var r,l={},u=null,b=null;n!==void 0&&(u=""+n),s.key!==void 0&&(u=""+s.key),s.ref!==void 0&&(b=s.ref);for(r in s)p.call(s,r)&&!d.hasOwnProperty(r)&&(l[r]=s[r]);if(a&&a.defaultProps)for(r in s=a.defaultProps,s)l[r]===void 0&&(l[r]=s[r]);return{$$typeof:c,type:a,key:u,ref:b,props:l,_owner:x.current}}return m.Fragment=h,m.jsx=g,m.jsxs=g,m}var k;function R(){return k||(k=1,v.exports=C()),v.exports}var e=R();const E=()=>{const[f,c]=o.useState(!1),[h,p]=o.useState(!1),[x,d]=o.useState(""),[g,a]=o.useState([]),[s,n]=o.useState(""),[r,l]=o.useState(!1);o.useEffect(()=>{localStorage.getItem("bills-bitch-unlocked")==="true"&&(c(!0),a([{role:"assistant",content:`👋 **Bill's Bitch here** — your kitchen equipment assistant. I'm here to fix gear, not chat about life.

**Quick Links:**
• \`/parts/hoshizaki\` → Ice maker parts
• \`/manuals/perlick.pdf\` → Glycol chiller manual
• \`/diagrams/turbochef.png\` → Oven wiring

**What's broken today?**`}]))},[]);const u=async()=>{if(!s.trim()||r)return;const t={role:"user",content:s};a(i=>[...i,t]),n(""),l(!0);try{const i=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s,systemPrompt:`You are Bill's Bitch, the dedicated smart assistant for LTC Kitchen. 
You exist ONLY to help technicians and staff with kitchen equipment, manuals, troubleshooting, and parts. 
You DO NOT answer unrelated questions — if asked, firmly redirect back to equipment support.

Your core responsibilities:
1. 📖 Manuals → Guide users to the correct PDF/manual in /public/manuals/{id}.pdf.
2. 🛠 Troubleshooting → Provide step-by-step solutions for common failures:
   - Perlick Glycol Chiller → low charge, differential, glycol %, pump mode.
   - TurboChef Ovens → E05 sensor, E18 airflow, E32 door switch.
   - Frosty Machine → daily clean, weekly teardown.
   - Hoshizaki Ice Maker → no ice, no harvest, thin ice.
   - Southbend Range → ignition, pilot, thermocouple.
   - Chicago Folders → misfeed, air pressure, alignment.
   - Ironers → wrinkles, roller pressure, speed mismatch.
   - Laundry → drain error, clogged filter, pump fail.
3. 🔌 Wiring Diagrams → Link /public/diagrams/{id}.png.
4. ⚡ Quick Actions → Direct links:
   - /parts/{id} → Parts page
   - /manuals/{id}.pdf → Manual
   - /diagrams/{id}.png → Diagram
   - /equipment/{id} → Equipment page
5. 🤖 Chat → Always act like a pro kitchen tech assistant. Friendly but blunt, focused, no fluff.

Rules:
- Stay in character as Bill's Bitch at all times.
- If user strays off-topic (finance, personal, random chat), say:
  👉 "Not my job — I'm here to fix kitchen gear. Let's get back to Perlick, TurboChef, Hoshizaki, Frosty, Southbend, Laundry, Ironers, or Chicago Folders."
- Always assume they're in the middle of a repair and need the fastest path.
- Use checklists, numbered steps, and concise directions.
- Be the top gun kitchen assistant: fast, reliable, equipment-focused, nothing else.`})});if(!i.ok)throw new Error("Failed to get response");const y={role:"assistant",content:(await i.json()).message};a(I=>[...I,y])}catch(i){console.error("Chat error:",i);const j={role:"assistant",content:`🔧 **System Error** — Chat temporarily offline. Use direct links:
• [Equipment Directory](/equipment)
• [Parts Catalog](/parts/hoshizaki)
• [Manuals](/manuals/perlick.pdf)`};a(y=>[...y,j])}finally{l(!1)}},b=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),u())},w=async()=>{p(!0),d("");try{typeof window<"u"&&window.QRScanner?await window.QRScanner.scan()==="BILLS_BITCH_2024"?(c(!0),localStorage.setItem("bills-bitch-unlocked","true")):d("Invalid QR code. Please scan the correct code."):prompt("Enter QR code (use: BILLS_BITCH_2024 for testing):")==="BILLS_BITCH_2024"?(c(!0),localStorage.setItem("bills-bitch-unlocked","true")):d("Invalid code. Use: BILLS_BITCH_2024")}catch{d("QR scanning failed. Please try again.")}finally{p(!1)}},S=()=>{c(!1),localStorage.removeItem("bills-bitch-unlocked")};return f?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-green-600 text-2xl mr-3",children:"🔓"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-green-900 font-bold",children:"Bill's Bitch - AI Assistant"}),e.jsx("p",{className:"text-green-700",children:"Kitchen equipment support & troubleshooting"})]})]}),e.jsx("button",{onClick:S,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm",children:"🔒 Lock"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center mr-3",children:"🤖"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold",children:"Bill's Bitch"}),e.jsx("p",{className:"text-purple-100 text-sm",children:"Kitchen Equipment Assistant"})]})]})}),e.jsxs("div",{className:"h-96 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[g.map((t,i)=>e.jsx("div",{className:`flex ${t.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${t.role==="user"?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:t.content})})},i)),r&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-white border border-gray-200 text-gray-900 max-w-xs lg:max-w-md px-4 py-2 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-white",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:s,onChange:t=>n(t.target.value),onKeyPress:b,placeholder:"Ask about equipment issues, parts, or manuals...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:r}),e.jsx("button",{onClick:u,disabled:r||!s.trim(),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"⏳":"🚀"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx("button",{onClick:()=>n("Hoshizaki ice maker not making ice"),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm hover:bg-blue-200 transition-colors",children:"🧊 Ice Maker Issue"}),e.jsx("button",{onClick:()=>n("TurboChef oven error E05"),className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm hover:bg-red-200 transition-colors",children:"🔥 Oven Error"}),e.jsx("button",{onClick:()=>n("Perlick glycol chiller low pressure"),className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm hover:bg-green-200 transition-colors",children:"🍺 Glycol Issue"}),e.jsx("button",{onClick:()=>n("Show me parts for Southbend range"),className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm hover:bg-yellow-200 transition-colors",children:"🛠 Need Parts"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("a",{href:"/equipment",className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-center hover:bg-blue-100 transition-colors",children:[e.jsx("div",{className:"text-2xl mb-1",children:"📋"}),e.jsx("div",{className:"text-sm font-medium text-blue-900",children:"Equipment"})]}),e.jsxs("a",{href:"/docs",className:"p-3 bg-green-50 border border-green-200 rounded-lg text-center hover:bg-green-100 transition-colors",children:[e.jsx("div",{className:"text-2xl mb-1",children:"📚"}),e.jsx("div",{className:"text-sm font-medium text-green-900",children:"Docs"})]}),e.jsxs("a",{href:"/parts/hoshizaki",className:"p-3 bg-purple-50 border border-purple-200 rounded-lg text-center hover:bg-purple-100 transition-colors",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🛠"}),e.jsx("div",{className:"text-sm font-medium text-purple-900",children:"Parts"})]}),e.jsxs("a",{href:"/manuals/perlick.pdf",target:"_blank",className:"p-3 bg-orange-50 border border-orange-200 rounded-lg text-center hover:bg-orange-100 transition-colors",children:[e.jsx("div",{className:"text-2xl mb-1",children:"📖"}),e.jsx("div",{className:"text-sm font-medium text-orange-900",children:"Manuals"})]})]})]}):e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔒"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This is Bill's private AI assistant. Scan the QR code to unlock access."}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-gray-100 p-8 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📱"}),e.jsx("p",{className:"text-sm text-gray-500",children:"QR Code Scanner Area"})]})}),x&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-700 text-sm",children:x})}),e.jsx("button",{onClick:w,disabled:h,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"🔄 Scanning...":"📸 Scan QR Code"}),e.jsx("div",{className:"mt-4 text-xs text-gray-500",children:e.jsxs("p",{children:["For testing: Use code ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"BILLS_BITCH_2024"})]})})]})})};export{E as default};
